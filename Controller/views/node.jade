extends layout

block content
  form.form-horizontal( role="form" )

  .row
    h1 Node "<span id="nodeid">#{node.id}</span>"

  .row
    .col-md-6

      .panel.panel-default
        .panel-heading
          h3.panel-title Inputs
        .panel-body
          table.table
            thead
              tr
                th Pin
                th State
            tbody
              each input in node.inputs
                tr
                  td= input.pin
                  td= input.state

      .panel.panel-default
        .panel-heading
          h3.panel-title Outputs
        .panel-body
          table.table
            thead
              tr
                th Pin
                th Output State
            tbody
              each output in node.outputs
                tr
                  td= output.pin
                  td= output.state

      .panel.panel-default
        .panel-heading
          h3.panel-title Variables
        .panel-body
          table.table
            thead
              tr
                th Variable
                th Type
                th Value
            tbody
              each variable in node.variables
                tr
                  td= variable.name
                  td= variable.type
                  td= variable.value

    .col-md-6

      .panel.panel-default
        .panel-heading
          h3.panel-title Information
        .panel-body
          table.table
            tr
              th Auth ID
              td= node.authid
            tr
              th Last Card Scanned
              td= node.lastCardScanned
            tr
              th Last Message Time
              td= node.lastMessageTime
            tr
              th Total Messages
              td= node.totalMessages

      if node.fake
        .panel.panel-default
          .panel-heading
            h3.panel-title Fake Node Debugging
          .panel-body
            .row
              .form-group
                label.col-sm-3.control-label( for="sendmesg" ) Raw Message
                .col-sm-9
                  input.form-control#sendmesg( type="text" )
            .row
              .form-group
                label.col-sm-3.control-label( for="sendcard" ) Fake Card
                .col-sm-9
                  input.form-control#sendcard( type="text" )

      if node.fake
        .panel.panel-default
          .panel-heading
            h3.panel-title Message Log
          .panel-body
            ul#msglog

          //.input-group
            span.input-group-addon
              label( for="cardNumber" ) Card Number
            input.form-control#cardNumber( type="text" )
  - var nodeconf = JSON.stringify( node, null, '    ' );
  script!= "\nvar node = new MPNode( " + nodeconf + " );\n"
